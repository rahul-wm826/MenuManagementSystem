<div *ngIf="proposal">
  <h2>{{ proposal.name }}</h2>
  <p>Status: {{ proposal.status }}</p>
  <a [routerLink]="['/proposals/builder', proposal.eventFunctionId]">Edit This Proposal</a>

  <h3>Actions</h3>
  <button (click)="onExport()">Download as PDF</button>

  <form [formGroup]="emailForm" (ngSubmit)="onEmailSubmit()">
    <h4>Email to Client</h4>
    <input formControlName="toEmail" placeholder="Client Email">
    <textarea formControlName="message"></textarea>
    <button type="submit">Send Email</button>
  </form>

  <h3>Internal & Client Comments</h3>
  <div *ngFor="let c of proposal.clientComments" class="comment-box">
    <strong>{{ c.author }}</strong> ({{ c.createdAt | date:'short' }})<p>{{ c.comment }}</p>
  </div>

  <form [formGroup]="commentForm" (ngSubmit)="onCommentSubmit()">
    <h4>Add New Comment</h4>
    <textarea formControlName="comment" placeholder="Add a comment..."></textarea>
    <button type="submit">Post Comment</button>
  </form>
</div>
